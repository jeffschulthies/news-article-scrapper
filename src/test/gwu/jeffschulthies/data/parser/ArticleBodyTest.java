package gwu.jeffschulthies.data.parser;

import gwu.jeffschulthies.data.retrieval.RetrievePage;
import org.testng.Assert;
import org.testng.annotations.Test;

/**
 * Created by Jeff Schulthies
 * .
 */
public class ArticleBodyTest {

    @Test
    public void testRetrieveArticle() throws Exception {
        RetrievePage fetch = new RetrievePage();
        Parser parse       = new Parser();

        //Test 1 - Washington Post
        fetch.retrieveFirstArticle("http://www.washingtonpost.com/world/national-security/obama-removes-cuba-from-the-list-of-state-sponsors-of-terrorism/2015/04/14/8f7dbd2e-e2d9-11e4-81ea-0649268f729e_story.html?hpid=z1");
        String headline = parse.body.retrieveArticle(fetch.getFirstArticle(),"WashingtonPost");
        String body = "President Obama has decided to lift the U.S. designation of Cuba as a state sponsor of terrorism, a decision that removes a principal impediment to the establishment of diplomatic relations between the two countries and accepts that Havana’s role as an agent of revolution has long since slipped into history. The long-awaited action, which was announced by the White House in a message to Congress on Tuesday, follows a pledge made by Obama and Cuban President Raúl Castro last December to move toward normalized relations. Congress has 45 days to consider Cuba’s removal from the list before it takes effect, but it cannot interfere with Obama’s decision without voting on separate legislation, a measure that the White House has deemed unlikely. In a news conference Saturday, Obama cited public opinion polls indicating that a majority of the American people approves of his opening to Cuba. [Obama and Castro agree to foster “a new relationship”] Cuba was first designated a state sponsor of terrorism in 1982, at the height of the Cold War, when it was outspoken and active in supporting Marxist revolutionary movements, particularly in Latin America. “Our hemisphere, and the world, look very different today than they did 33 years ago,” Secretary of State John F. Kerry said in a statement. While problems including corruption, violence and drug trafficking remain, every country in Latin America — except for Cuba — has a democratically elected government, and the violent leftist revolutions that once racked the region have long since petered out. Cuba’s removal would leave only three countries on the list: Iran, Sudan and Syria. In a brief statement issued late Tuesday, Josefina Vidal, the director of U.S. relations at Cuba’s Foreign Ministry, offered guarded praise for the move. “The government of Cuba recognizes the just decision made by the President of the United States to remove Cuba from a list on which it never deserved to belong,” she said. “As the Cuban government has reiterated on multiple occasions, Cuba rejects and condemns all acts of terrorism, in all its forms and manifestations, as well as any act whose objective is to encourage, support, finance or give shelter to terrorists,” the statement read. In his notification to Congress, Obama certified that “the government of Cuba has not provided any support for international terrorism during the preceding six-month period” and “has provided assurances that it will not support acts of international terrorism in the future.” President Obama addresses the Summit of the Americas in Panama, highlighting change in Cuba policy as a hallmark in wider shift in Latin America. (Reuters) Obama’s decision followed White House receipt last week of a State Department recommendation. Kerry said that the recommendation “reflects the Department’s assessment that Cuba meets the criteria established by Congress for rescission. While the United States has had, and continues to have, significant concerns and disagreements with a wide range of Cuba’s policies and actions, these concerns and disagreements fall outside the criteria for designation as a State Sponsor of Terrorism.” Administration officials said the review included consultation with the intelligence community as well as assurances from the Cuban government. [What it means to drop Cuba from the list of terrorism sponsors] Kerry “looks forward to going to Cuba to open embassies, and I think he’s hoping to do that as soon as we can get things ironed out,” said a senior administration official in a briefing for reporters held under conditions of anonymity. U.S. officials said that full normalization of relations with Cuba, which would include congressional removal of sanctions against Havana, could take years. But the president has the power to reestablish diplomatic relations, severed more than a half-century ago following the Cuban revolution that brought Fidel Castro to power. The two countries would open embassies in the same buildings that once served as their diplomatic headquarters in Havana and Washington. Since 1977, they have housed Interests Sections under the supervision of third-party governments, allowing Cuba and the United States to conduct diplomatic business with each other in the absence of formal diplomatic ties. In the four months since Obama and Castro announced they would move toward normalization, high-level Cuban and U.S. officials have held three rounds of talks on the initial step of establishing formal relations. Cuba had demanded that the United States lift the terrorism designation, while the United States has asked for Cuban assurances that its diplomats will be able to freely move around the island and that Cuban citizens will not be impeded in access to the U.S. Embassy. Those talks were furthered, the administration official said, during a historic meeting in Panama City last weekend between Obama and Raúl Castro, who took over from his brother Fidel in 2006. The administration is “pretty optimistic that things will move ahead on the diplomatic front,” the official said, adding that progress is “as much up to the Cubans as anybody.” Both the United States and Cuba restrict movement of their respective diplomats in the Interests Sections. While the Cubans have balked at completely unrestricted movement, U.S. officials have said they at least want the freedom to travel throughout the island with prior notification to the government. A country on the state-sponsor-of-terrorism list is banned from U.S. arms exports and sales and U.S. economic assistance and is also under a wide variety of other financial restrictions. All of those prohibitions will remain, in Cuba’s case, under other congressionally mandated sanctions. The most likely immediate effect of the list removal is that the Cuban Interests Section here will probably be able to open a U.S. bank account for its administrative dealings in this country. Although such accounts have not been prohibited, U.S. banks have refused to deal with Cuba as a designated “terrorist” country. Sen. Richard J. Durbin (D-Ill.), who participated in efforts to reach an accord with Cuba, said that “while no fan of the Castro regime, I continue to believe that opening up the island to American ideas, vibrancy and trade is the most effective way to see a more open and tolerant Cuba.” Congressional opponents of the removal, led by Cuban American Sens. Robert Menendez (D-N.J.) and Marco Rubio (R-Fla.), have argued that Cuba’s refusal to extradite American fugitives who have resided there, in most cases for decades, constitutes support for international terrorism. But the administration has said that such acts are not part of the law. Ahead of Tuesday’s announcement, Sen. John McCain (R-Ariz.) was critical of the possibility that Cuba could be removed from the State Department list while providing refuge to American fugitives. One is Joanne Chesimard, now known as Assata Shakur, a black militant who fatally shot a New Jersey State Police trooper in 1973 and escaped from prison after being convicted of the murder. “I think it would be nice if the Cubans sent back the terrorists that they’re harboring who have killed American law enforcement officers,” McCain said Monday. “It might be a nice gesture, but it’s not going to happen.” Nick Miroff in Havana contributed to this report. Read more: After 33 years, the U.S. is dropping its claim that Cuba sponsors terrorism. Here’s what it means. Cuban Americans’ shifting identity, and political views, divides key bloc Today's coverage from Post correspondents around the world";
        Assert.assertEquals(headline, body);

        //Test 2 - LA Times
        fetch.retrieveFirstArticle("http://www.latimes.com/science/sciencenow/la-sci-sn-medical-records-breaches-20150414-story.html");
        headline = parse.body.retrieveArticle(fetch.getFirstArticle(),"LATimes");
        body = "Electronic health records were supposed to make life better for patients and doctors -- getting rid of bulky and messy paper files, streamlining delivery of care and organizing medical information so that scientists can use it to make discoveries. lRelated Science Now To fight teen drinking, experts call for stricter movie ratingsSee all related 8 The personal information of patients in the United States is not safe, and it needs to be - physician Dr. David Blumenthal and attorney Deven McGraw, writing on electronic medical data breaches in JAMA But those benefits could be for naught if digital medical data aren't safe -- and they don't appear to be. A new analysis of government records, published Tuesday in the journal JAMA, found that close to a thousand large data breaches affected 29 million medical records between 2010 and 2013.  Nearly 60% were the result of theft, reported study coauthors Dr. Vincent Liu, of the Kaiser Permanente Division of Research in Oakland, and Dr. Mark A. Musen and Timothy Chou, of Stanford University. To conduct their research, the team mined an online database of health data breaches maintained by the U.S. Department of Health and Human Services.  They focused on data breaches affecting 500 or more people -- 949 in all, which made up 82.1% of the reports in the database in the years studied.  cComments @gilrod2007 we never did. any government agency and i mean ANY agency, business, and any citizen pc can be hacked. there has been institutional hubris in the technical world that has put us in this mess. i started in IT back in '83, where either you worked with stand-alone systems or you... dodger60 at 8:14 PM April 14, 2015 Add a comment See all comments 17 Total numbers of breaches reported per year increased over the period, from 214 in 2010 to 265 in 2013. Six breaches affected at least a million records apiece. And more than a third of the breaches occurred in five states -- California, Texas, Florida, New York and Illinois.  Overall, 29.1 million records were affected. Some patients may have been involved in more than one breach, the researchers said, making the total number of people affected somewhat lower.  More than two-thirds of the breaches were made electronically, including via laptops, tablets and other portable electronic devices. In nearly one-third of cases, the breaches happened when health insurance companies contracted their data management to outside firms. \"The personal information of patients in the United States is not safe, and it needs to be,\" wrote Dr. David Blumenthal of the Commonwealth Fund and attorney Deven McGraw of the law firm Manatt Phelps & Phillips in an editorial that accompanied the JAMA study. \"Even if only 15 million or 5 million patients had their data breached, it is too many.\" Blumenthal and McGraw wrote that concerns about data security could lead patients to resist sharing data online, affecting medical quality and crippling research. They suggested that healthcare providers needed to do more to practice \"good data hygiene\": encrypting data and preventing employees from storing medical information on personal electronic devices. They also called on policymakers to make changes to the \"antiquated and inadequate\" Health Insurance Portability and Accountability Act. That law does not regulate online entities like Google or Facebook, which collect health data \"intentionally or not ... and could become major custodians of [health] data in the future,\" they wrote. For more on science and health, follow me on Twitter: @LATerynbrown Copyright © 2015, Los Angeles Times";
        Assert.assertEquals(headline, body);

    }
}